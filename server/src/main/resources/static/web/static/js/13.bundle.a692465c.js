(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{702:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("section",[l("div",{staticClass:"toolbar"},[l("el-input",{attrs:{placeholder:"请输入内容"}}),e._v(" "),l("el-button",{attrs:{icon:"el-icon-search"}}),e._v(" "),l("div",{staticClass:"placeholder"}),e._v(" "),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDeleteClick}},[e._v("删除")]),e._v(" "),l("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.downloadFiles}},[e._v("下载")]),e._v(" "),l("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e.handleUploadClick}},[e._v("上传")]),e._v(" "),l("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadInput",multiple:"false"},on:{change:e.uploadFile}})],1),e._v(" "),l("div",{staticClass:"table"},[l("el-table",{attrs:{data:e.tableData},on:{"selection-change":e.tableSelectChange}},[l("el-table-column",{attrs:{type:"selection"}}),e._v(" "),l("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v(e._s(t.row.fileName||"未命名"))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"createTime",label:"上传时间","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"fullName",label:"上传人","min-width":"100",align:"center"}})],1)],1),e._v(" "),l("div",{staticClass:"pagination"},[l("div",{staticClass:"placeholder"}),e._v(" "),l("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.tableTotal},on:{"current-change":e.tablePageChange}})],1)])};a._withStripped=!0;var n={data:function(){return{tableData:null,tableParams:{parameter:null},tablePage:1,tableTotal:1,sels:[]}},methods:{tableListGet:function(){var e=this;this.$API.DocGet(this.tableParams.parameter?this.tableParams:null,this.tablePage).then(function(t){e.tableData=t.records,e.tableTotal=t.total})},handleUploadClick:function(){document.getElementById("uploadInput").value="",document.getElementById("uploadInput").click()},uploadFile:function(e){var t,l=this,a=e.target.files;if(a&&0!==a.length){t=a[0];var n=new FormData;n.append("multipartFile",t),this.$API.Upload(n).then(function(e){if(e){var a={fileName:t.name,resourceUrl:e};l.$API.DocAdd(a).then(function(e){l.tableListGet()})}})}},downloadFiles:function(){for(var e=this.sels.map(function(e){return{fileName:e.fileName,resourceUrl:e.resourceUrl}}),t=0;t<e.length;t++){var l=document.createElement("a");l.href=e[t].resourceUrl,l.download=e[t].fileName,l.click()}},handleDeleteClick:function(){var e=this,t=this.sels.map(function(e){return e.resourceId});0!==t.length&&this.$confirm("确认删除？",{type:"warning"}).then(function(){e.$API.DocDelete(null,t.join(",")).then(function(t){e.tableListGet()})})},tablePageChange:function(e){this.tablePage=e,this.tableListGet()},tableSelectChange:function(e){this.sels=e}},mounted:function(){this.tableListGet()}},i=l(8),o=Object(i.a)(n,a,[],!1,null,null,null);o.options.__file="src/views/Document/Doc.vue";t.default=o.exports}}]);