(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{704:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("section",[l("div",{staticClass:"toolbar"},[l("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.tableParams.parameter,callback:function(t){e.$set(e.tableParams,"parameter",t)},expression:"tableParams.parameter"}}),e._v(" "),l("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.tableListGet}}),e._v(" "),l("div",{staticClass:"placeholder"})],1),e._v(" "),l("div",{staticClass:"table"},[l("el-table",{attrs:{data:e.tableData}},[l("el-table-column",{attrs:{prop:"declareId",label:"单号","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"provinceName",label:"省","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cityName",label:"市","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"siteCompanyName",label:"单位","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"itemNumberName",label:"项目编号","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"projectManager",label:"项目经理","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"siteName",label:"台站名称","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"",label:"台站详情","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.rowSiteDetail(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"founderName",label:"申报人","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"createTime",label:"申报日期",formatter:e.dateFormat,"min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"",label:"申报详情","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.rowDeclareDetail(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"lastMaintainPeople",label:"处理人","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"handleState",label:"处理状态","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lastMaintainTime",label:"处理日期",formatter:e.dateFormat,"min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"",label:"处理详情","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.rowDealList(t.row)}}},[e._v("详情")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"pagination"},[l("div",{staticClass:"placeholder"}),e._v(" "),l("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.tableTotal},on:{"current-change":e.tablePageChange}})],1),e._v(" "),l("z-img-view",{attrs:{imgs:e.fileList,visible:e.visible.pictureDetail},on:{"update:visible":function(t){return e.$set(e.visible,"pictureDetail",t)}}}),e._v(" "),l("el-dialog",{attrs:{title:"视频",visible:e.visible.videoDetail,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"videoDetail",t)},close:e.handleVideoClose}},[l("video",{ref:"videoPlayer",staticStyle:{width:"95%","margin-left":"2.5%"},attrs:{src:e.videoSrc,controls:"controls"}})]),e._v(" "),l("el-dialog",{attrs:{title:"台站详情",visible:e.visible.siteDetailDlg,width:"20%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"siteDetailDlg",t)}}},[l("div",{staticStyle:{"padding-left":"15px"}},[l("p",[e._v("台站类型： "+e._s(e.rowDetail.siteTypeName))]),e._v(" "),l("p",[e._v("产品型号： "+e._s(e.rowDetail.productModelName))]),e._v(" "),l("p",[e._v("站点性质： "+e._s(e.rowDetail.siteNatureName))]),e._v(" "),l("p",[e._v("站点状态： "+e._s(e.rowDetail.siteUsageStateName))]),e._v(" "),l("p",[e._v("出场时间： "+e._s(e.dateFormat(null,null,e.rowDetail.siteManufactureTime)))]),e._v(" "),l("p",[e._v("保修时间： "+e._s(e.dateFormat(null,null,e.rowDetail.siteGuaranteeTime)))])]),e._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.visible.siteDetailDlg=!1}}},[e._v("关 闭")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"申报详情",visible:e.visible.declareDetailDlg,width:"20%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"declareDetailDlg",t)}}},[l("div",{staticStyle:{"padding-left":"15px"}},[l("p",[e._v("申报人： "+e._s(e.rowDetail.founderName))]),e._v(" "),l("p",[e._v("角色： "+e._s(e.rowDetail.roleName))]),e._v(" "),l("p",[e._v("联系人： "+e._s(e.rowDetail.contactsName))]),e._v(" "),l("p",[e._v("联系电话： "+e._s(e.rowDetail.phone))]),e._v(" "),l("p",[e._v("申报类型： "+e._s(e.rowDetail.declareType))]),e._v(" "),l("p",[e._v("保修状态： "+e._s(e.rowDetail.siteGuaranteeTime))]),e._v(" "),l("p",[e._v("申报内容： "+e._s(e.rowDetail.declareContent))])]),e._v(" "),l("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",type:"primary"},on:{click:e.rowPictureDetail}},[e._v("图 片")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.rowVideoDetail}},[e._v("视 频")]),e._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.visible.declareDetailDlg=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"处理列表",visible:e.visible.dealListDlg,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"dealListDlg",t)}}},[l("el-table",{attrs:{data:e.dealListData}},[l("el-table-column",{attrs:{label:"维护记录","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("第"+e._s(t.row.num)+"次维护")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"createTime",label:"维护时间",formatter:e.dateFormat,"min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"详情","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.dealDetail(t.row)}}},[e._v("详情")])]}}])})],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"处理详情",visible:e.visible.dealDetailDlg,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"dealDetailDlg",t)}}},[l("el-table",{attrs:{data:e.dealDetailData}},[l("el-table-column",{attrs:{prop:"oneLevelName",label:"售后类型","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"twoLevelName",label:"故障设备","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"threeLevelName",label:"故障部件","min-width":"100",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"describeContent",label:"故障描述","min-width":"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.row.describeContent}},[l("div",{staticStyle:{"text-overflow":"ellipsis","word-break":"normal"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.describeContent))])])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"详情","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.rowPictureDetail(t.row)}}},[e._v("图片")]),e._v(" "),l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.rowVideoDetail(t.row)}}},[e._v("视频")])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"编辑","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.dealEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"编辑",visible:e.visible.dealEditDlg,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.visible,"dealEditDlg",t)}}},[l("el-cascader",{staticStyle:{width:"550px"},attrs:{options:e.categoryOptions,props:e.categoryProps},model:{value:e.dealEditForm.idArray,callback:function(t){e.$set(e.dealEditForm,"idArray",t)},expression:"dealEditForm.idArray"}}),e._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.visible.dealEditDlg=!1}}},[e._v("关 闭")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.dealEditSubmit}},[e._v("确 定")])],1)],1)],1)};i._withStripped=!0;var a={data:function(){return{tableData:null,tableParams:{parameter:null},tablePage:1,tableTotal:1,visible:{siteDetailDlg:!1,declareDetailDlg:!1,dealListDlg:!1,dealDetailDlg:!1,dealEditDlg:!1,pictureDetail:!1,videoDetail:!1},rowDetail:{},dealListData:[],dealDetailData:null,dealEditForm:{declareId:null,deviceId:null,saleNumId:null,repairRecordId:null,idArray:[],oneLevelId:null,twoLevelId:null,threeLevelId:null},categoryOptions:null,categoryProps:{label:"name",value:"id",children:"child"},fileList:[],videoSrc:null}},methods:{tableListGet:function(){var e=this;this.$API.BrowseGet(this.tableParams.parameter?this.tableParams:null,this.tablePage).then(function(t){e.tableData=t.records,e.tableTotal=t.total})},dealListGet:function(e){var t=this;this.$API.BrowseGetNumById(null,e).then(function(e){t.dealListData=e})},rowSiteDetail:function(e){this.rowDetail=e,this.visible.siteDetailDlg=!0},rowDeclareDetail:function(e){this.rowDetail=e,this.visible.declareDetailDlg=!0},rowDealList:function(e){this.dealListGet(e.declareId),this.visible.dealListDlg=!0},dealDetail:function(e){var t=this;this.$API.BrowseGetById(null,e.saleNumId).then(function(e){t.visible.dealDetailDlg=!0,t.dealDetailData=e})},dealEdit:function(e){var t=this;this.dealEditForm.declareId=e.declareId,this.dealEditForm.deviceId=e.deviceId,this.dealEditForm.saleNumId=e.saleNumId,this.dealEditForm.repairRecordId=e.repairRecordId,this.$API.CategoryGet().then(function(e){t.categoryOptions=e,t.visible.dealEditDlg=!0}).catch(function(e){t.$message({message:"获取分类列表失败",type:"error"})})},dealEditSubmit:function(){var e=this,t={declareId:this.dealEditForm.declareId,deviceId:this.dealEditForm.deviceId,saleNumId:this.dealEditForm.saleNumId,repairRecordId:this.dealEditForm.repairRecordId,oneLevelId:this.dealEditForm.idArray[0]||0,twoLevelId:this.dealEditForm.idArray[1]||0,threeLevelId:this.dealEditForm.idArray[2]||0};this.$API.BrowseEdit(t).then(function(t){e.visible.dealEditDlg=!1,e.visible.dealDetailDlg=!1})},rowPictureDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rowDetail;this.fileList=e.imgList.map(function(e){return e.resourceUrl}),this.visible.pictureDetail=!0},rowVideoDetail:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rowDetail,t=0;t<e.imgList.length;t++)if("申报视频"===e.imgList[t].resourceType||"申报处理结果视频"===e.imgList[t].resourceType){this.videoSrc=e.imgList[t].resourceUrl,this.visible.videoDetail=!0;break}this.videoSrc||this.$message({message:"未找到视频",type:"info"})},handleVideoClose:function(){this.$refs.videoPlayer.pause(),this.videoSrc=null},dateFormat:function(e,t,l){return this.$format(l)},tablePageChange:function(e){this.tablePage=e,this.tableListGet()}},mounted:function(){this.tableListGet()}},r=l(8),n=Object(r.a)(a,i,[],!1,null,null,null);n.options.__file="src/views/AfterSale/Browse.vue";t.default=n.exports}}]);